package project;

import java.util.List;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;

	public class Amazon {

	    public static void main(String[] args) throws InterruptedException {
	        
	        WebDriver driver = new ChromeDriver();

	        // Step 1: Go to Amazon
	        driver.get("https://www.amazon.com/");
	       driver.findElement(By.xpath("//button[@type='submit']")).click();
	        Thread.sleep(2000);  //wait

	        // Step 2: Search for a product
	        WebElement searchBox = driver.findElement(By.id("twotabsearchtextbox"));
	        searchBox.sendKeys("laptop");
	        searchBox.submit();
	        Thread.sleep(3000);  
	        
	        // Step 3: Get the top 5 product 
	        List<WebElement> products = driver.findElements(By.cssSelector("div[data-component-type='s-search-result']"));

	        for (int i = 0; i < 5; i++) {
	            WebElement product = products.get(i);

	            String title = "N/A";
	            String price = "N/A";
	            String rating = "N/A";

	            try {
	                title = product.findElement(By.cssSelector("h2 span")).getText();
	            } catch (Exception e) {
	                // Ignore if title not found
	            }

	            try {
	                String priceWhole = product.findElement(By.cssSelector(".a-price .a-price-whole")).getText();
	                String priceFraction = product.findElement(By.cssSelector(".a-price .a-price-fraction")).getText();
	                price = "$" + priceWhole + "." + priceFraction;
	            } catch (Exception e) {
	                // Ignore if price not found
	            }

	            try {
	                rating = product.findElement(By.cssSelector(".a-icon-alt")).getText();
	            } catch (Exception e) {
	                // Ignore if rating not found
	            }

	            System.out.println("\nProduct " + (i + 1));
	            System.out.println("Title: " + title);
	            System.out.println("Price: " + price);
	            System.out.println("Rating: " + rating);
	        }

	        // Step 4: Close browser
	        driver.quit();
	    }
	}

	

